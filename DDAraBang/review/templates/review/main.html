<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<title>Kakao 지도 시작하기</title>
</head>
<body>
	<div id="map" style="width:1000px;height:800px;"></div>
	<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=361c1489406c5f6260ca4e39435052df"></script>
<!--	<script>-->
<!--		var container = document.getElementById('map');-->
<!--		var options = {-->
<!--			center: new kakao.maps.LatLng(37.5642135,127.0016985), // 지도의 중심좌표-->
<!--            level: 9-->
<!--		};-->

<!--		var map = new kakao.maps.Map(container, options);-->
<!--	</script>-->

    <script>
        var container = document.getElementById('map');
		var options = {
			center: new kakao.maps.LatLng(37.5642135,127.0016985), // 지도의 중심좌표
            level: 9
		};

		var map = new kakao.maps.Map(container, options);

        $.getJSON('review/templates/review/seoulgeo.geojson', function(geojson) {
            var data = geojson.features;
            var coordinates = [];
            var name = '';

            $.each(data,function (index,val) {
                coordinates = val.geometry.coordinates;
                name = val.properties.SIG_KOR_NM;

                displayArea(coordinates,name);
            })

        })

        var polygons = [];

        function displayArea(coordinates,name) {
            var path = [];
            var points = [];

            $.each(coordinates[0], function (index,coordinate) {
                var point = new Object();
                point.x = coordinate[1];
                point.y = coordinate[0];
                points.push(point);
                path.push(new kakao.maps.LatLng(coordinate[1],coordinate[0]));
            })

            var polygon = new kakao.maps.Polygon({
                map : map,
                path : path,
                strokeWeight : 2,
                strokeColor: '#004c80',
                strokeOpacity : 0.8,
                fillColor : '#fff',
                fillOpacity : 0.7
            });

            polygons.push(polygon);

            kakao.maps.event.addListener(polygon,'mouseover',function (mouseEvent) {
                polygon.setOptions({
                    fillColor: '#09f'
                });
                customOverlay.setContent('<div class ="area">'+name+'</div>');
                customOverlay.setPosition(mouseEvent.latLng);
                customOverlay.setMap(map);

            });

            kakao.maps.event.addListener(polygon,'mousemove',function (mouseEvent) {
                customOverlay.setPosition(mouseEvent.latLng)
            });

            kakao.maps.event.addListener(polygon,'mouseout',function () {
                polygon.setOptions({
                    fillColor : '#fff'
                });
                customOverlay.setMap(null);
            });

            kakao.maps.event.addListener(polygon,'click',function () {
                var level = map.getLevel()-2;

                map.setLevel(level,{anchor:centroid(points),animate:{
                    duration:350
                }});
                deletePolygon(polygons);
            });

        }

    </script>
</body>
</html>