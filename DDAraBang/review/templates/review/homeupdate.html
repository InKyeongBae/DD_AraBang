{% extends 'community/layout.html' %}

{% block title %}
    Home Update
{% endblock %}

{% block content %}
    <div class="create-address-body">
        <div class="create-address-title">
            <p>거주 후기 수정하기</p>
        </div>
        <div class="create-address-detail">
            <div class="create-detail-2">
                <form action="{% url 'review:homeupdate' pk=review.pk %}" method="POST" enctype="multipart/form-data" id="homeupdate">
                    {% csrf_token %}

                    <div id="home-image-correct">
                        <div id="home-image-correct-1">
                            <p>집 사진:</p><img src="{{ review.image.url }}" alt="{{ review.image }} 못찾음"
                                             style="width: 300px; height: 300px;">
                        </div>
                        <div id="home-image-correct-2">
                            <p>사진 수정:</p><input type="file" accept="image/*" name="image" id="bfile"/><br/>
                        </div>
                    </div>
                    <div id="home-floor">
                        <p>내가 살았던 곳은?</p>
                        <input id='floor1' type="radio" name="floor" value="지상"/>
                        <p>지상</p>
                        <input id='floor2' type="radio" name="floor" value="반지하"/>
                        <p>반지하</p>
                        <input id='floor3' type="radio" name="floor" value="지하"/>
                        <p>지하</p>
                    </div>

                    <div class="pros-cons">
                        <div id="home-pros-cons">
                            <p>집의 장점</p>
                            <textarea name="advantage" placeholder='{{ review.advantage }}'
                                      onfocus="this.value='{{ review.advantage }}';this.style.color='red';"></textarea><br/>
                        </div>
                        <div id="home-pros-cons">
                            <p>집의 단점</p>
                            <textarea name="disadvantage" placeholder='{{ review.disadvantage }}'
                                      onfocus="this.value='{{ review.disadvantage }}';this.style.color='red';"></textarea><br/>
                        </div>
                    </div>

                    <table class="home-detail-question">
                        <tr>
                            <td width="80"><p>수압</p></td>
                            <td width="300" id="table-level">
                                <input id='water1' type="radio" name="water" value="상"/>상
                                <input id='water2' type="radio" name="water" value="중"/>중
                                <input id='water3' type="radio" name="water" value="하"/>하
                            </td>
                            <td width="300"><textarea name="waterplus" cols="40" rows="4"
                                                      placeholder='{{ review.waterplus }}'
                                                      onfocus="this.value='{{ review.waterplus }}';this.style.color='red';"></textarea>
                            </td>
                        <tr>
                            <td width="80"><p>채광</p></td>
                            <td width="300" id="table-level">
                                <input id='light1' type="radio" name="light" value="상"/>
                                상
                                <input id='light2' type="radio" name="light" value="중"/>
                                중
                                <input id='light3' type="radio" name="light" value="하"/>
                                하
                            </td>
                            <td width="300"><textarea name="lightplus" cols="40" rows="4"
                                                      placeholder='{{ review.lightplus }}'
                                                      onfocus="this.value='{{ review.lightplus }}';this.style.color='red';"></textarea>
                            </td>
                        <tr>
                        <tr>
                            <td width="80"><p>방음</p></td>
                            <td width="300" id="table-level">
                                <input id='noise1' type="radio" name="noise" value="상"/>
                                상
                                <input id='noise2' type="radio" name="noise" value="중"/>
                                중
                                <input id='noise3' type="radio" name="noise" value="하"/>
                                하
                            </td>
                            <td width="300"><textarea name="noiseplus" cols="40" rows="4"
                                                      placeholder='{{ review.noiseplus }}'
                                                      onfocus="this.value='{{ review.noiseplus }}';this.style.color='red';"></textarea>
                            </td>
                        </tr>
                        <tr>
                            <td width="80"><p>보안</p></td>
                            <td width="300" id="table-level">
                                <input id='security1' type="radio" name="security" value="상"/>
                                상
                                <input id='security2' type="radio" name="security" value="중"/>
                                중
                                <input id='security3' type="radio" name="security" value="하"/>
                                하
                            </td>
                            <td width="300"><textarea name="securityplus" cols="40" rows="4"
                                                      placeholder='{{ review.securityplus }}'
                                                      onfocus="this.value='{{ review.securityplus }}';this.style.color='red';"></textarea>
                            </td>
                        </tr>
                        <tr>
                            <td width="80"><p>해충</p></td>
                            <td width="300" id="table-level">
                                <input id='bug1' type="radio" name="bug" value="상"/>
                                상
                                <input id='bug2' type="radio" name="bug" value="중"/>
                                중
                                <input id='bug3' type="radio" name="bug" value="하"/>
                                하
                            </td>
                            <td width="300"><textarea name="bugplus" cols="40" rows="4"
                                                      placeholder='{{ review.bugplus }}'
                                                      onfocus="this.value='{{ review.bugplus }}';this.style.color='red';"></textarea>
                            </td>
                        </tr>
                        <tr>
                            <td width="120"><p>월세/관리비</p></td>
                            <td width="300"></td>
                            <td width="300"><textarea name="money" cols="40" rows="4" placeholder='{{ review.money }}'
                                                      onfocus="this.value='{{ review.money }}';this.style.color='red';"></textarea>
                            </td>
                        </tr>
                    </table>

                        <div id="recommend">
                            <p>지인에게 추천하시겠습니까?</p>
                            <input id="yes" type="radio" name="recommend" value="Yes"/>
                            <p>Yes</p>
                            <input id="no" type="radio" name="recommend" value="No"/>
                            <p>No</p>
                        </div>
                        <div id="star_grade"><p>별점:</p>
                            <a id="star1" href="#">★</a>
                            <a id="star2" href="#">★</a>
                            <a id="star3" href="#">★</a>
                            <a id="star4" href="#">★</a>
                            <a id="star5" href="#">★</a>
                        </div>
                        <div id="detail-save">
                            <input id="ratingscore" type="text" name="rating" style=" display:none; "/>
                            <br>
                            <input type="submit" class="inputbutton" value="수정 완료"/>
                        </div>

                </form>
            </div>
        </div>
        {#jquery script 추가#}
        <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>

        {#별점 script#}
        <script>
            $('#star_grade a').click(function () {
                $(this).parent().children("a").removeClass("on");  /* 별점의 on 클래스 전부 제거 */
                $(this).addClass("on").prevAll("a").addClass("on"); /* 클릭한 별과, 그 앞 까지 별점에 on 클래스 추가 */
                rating = $('.on').length;
                document.getElementById("ratingscore").value = rating
                return false;
            });
        </script>

        <script>
            if ({{ review.rating }} ===
            1
            )
            {
                $('#star1').addClass("on").prevAll("a").addClass("on");
                document.getElementById("ratingscore").value = {{ review.rating }};
            }
            else
            if ({{ review.rating }} ===
            2
            )
            {
                $('#star2').addClass("on").prevAll("a").addClass("on");
                document.getElementById("ratingscore").value = {{ review.rating }};
            }
            else
            if ({{ review.rating }} ===
            3
            )
            {
                $('#star3').addClass("on").prevAll("a").addClass("on");
                document.getElementById("ratingscore").value = {{ review.rating }};
            }
            else
            if ({{ review.rating }} ===
            4
            )
            {
                $('#star4').addClass("on").prevAll("a").addClass("on");
                document.getElementById("ratingscore").value = {{ review.rating }};
            }
            else
            if ({{ review.rating }} ===
            5
            )
            {
                $('#star5').addClass("on").prevAll("a").addClass("on");
                document.getElementById("ratingscore").value = {{ review.rating }};
            }
            else
            if ({{ review.rating }} ===
            0
            )
            {
            }
        </script>

        <script>
            if ('{{ review.floor }}' === '지상') {
                $('#floor1').prop('checked', true);
            } else if ('{{ review.floor }}' === '반지하') {
                $('#floor2').prop('checked', true);
            } else if ('{{ review.floor }}' === '지하') {
                $('#floor3').prop('checked', true);
            }

            if ('{{ review.water }}' === '상') {
                $('#water1').prop('checked', true);
            } else if ('{{ review.water }}' === '중') {
                $('#water2').prop('checked', true);
            } else if ('{{ review.water }}' === '하') {
                $('#water3').prop('checked', true);
            }

            if ('{{ review.light }}' === '상') {
                $('#light1').prop('checked', true);
            } else if ('{{ review.light }}' === '중') {
                $('#light2').prop('checked', true);
            } else if ('{{ review.light }}' === '하') {
                $('#light3').prop('checked', true);
            }

            if ('{{ review.noise }}' === '상') {
                $('#noise1').prop('checked', true);
            } else if ('{{ review.noise }}' === '중') {
                $('#noise2').prop('checked', true);
            } else if ('{{ review.noise }}' === '하') {
                $('#noise3').prop('checked', true);
            }

            if ('{{ review.security }}' === '상') {
                $('#security1').prop('checked', true);
            } else if ('{{ review.security }}' === '중') {
                $('#security2').prop('checked', true);
            } else if ('{{ review.security }}' === '하') {
                $('#security3').prop('checked', true);
            }

            if ('{{ review.bug }}' === '상') {
                $('#bug1').prop('checked', true);
            } else if ('{{ review.bug }}' === '중') {
                $('#bug2').prop('checked', true);
            } else if ('{{ review.bug }}' === '하') {
                $('#bug3').prop('checked', true);
            }


            if ('{{ review.recommend }}' === 'Yes') {
                $('#yes').prop('checked', true);
            } else if ('{{ review.recommend }}' === 'No') {
                $('#no').prop('checked', true);
            }

        </script>
    </div>

{% endblock %}